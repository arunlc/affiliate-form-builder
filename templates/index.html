{% load static %}
<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Affiliate Form Builder</title>
    <!-- Basic fallback styles -->
    <style>
      .fallback-container {
        min-height: 100vh;
        background-color: #f9fafb;
        display: flex;
        align-items: center;
        justify-content: center;
        font-family: system-ui, -apple-system, sans-serif;
      }
      .fallback-content {
        text-align: center;
        max-width: 600px;
        padding: 2rem;
      }
      .fallback-title {
        font-size: 2.5rem;
        font-weight: bold;
        color: #111827;
        margin-bottom: 1rem;
      }
      .fallback-subtitle {
        color: #6b7280;
        margin-bottom: 2rem;
        font-size: 1.1rem;
      }
      .fallback-buttons {
        display: flex;
        gap: 1rem;
        justify-content: center;
        flex-wrap: wrap;
      }
      .fallback-btn {
        padding: 0.75rem 1.5rem;
        border-radius: 0.5rem;
        text-decoration: none;
        font-weight: 500;
        transition: all 0.2s;
        display: inline-block;
      }
      .fallback-btn-primary {
        background-color: #2563eb;
        color: white;
      }
      .fallback-btn-primary:hover {
        background-color: #1d4ed8;
      }
      .fallback-btn-secondary {
        background-color: #16a34a;
        color: white;
      }
      .fallback-btn-secondary:hover {
        background-color: #15803d;
      }
      .fallback-accounts {
        margin-top: 2rem;
        color: #6b7280;
        font-size: 0.9rem;
      }
      .fallback-code {
        background-color: #e5e7eb;
        padding: 0.25rem 0.5rem;
        border-radius: 0.25rem;
        font-family: monospace;
        color: #374151;
      }
      .fallback-footer {
        margin-top: 1.5rem;
        color: #9ca3af;
        font-size: 0.8rem;
      }
    </style>
  </head>
  <body>
    <div id="root">
      <!-- Fallback content with inline styles -->
      <div class="fallback-container">
        <div class="fallback-content">
          <h1 class="fallback-title">
            Affiliate Form Builder SaaS
          </h1>
          <p class="fallback-subtitle">
            Platform Ready for Deployment! ðŸš€
          </p>
          <div class="fallback-buttons">
            <a href="/admin" class="fallback-btn fallback-btn-primary">
              Admin Panel
            </a>
            <a href="/api" class="fallback-btn fallback-btn-secondary">
              API Documentation
            </a>
          </div>
          <div class="fallback-accounts">
            <p style="margin-bottom: 0.5rem;">Test Accounts Available:</p>
            <div style="margin-bottom: 0.25rem;">
              ðŸ”‘ Affiliate: <span class="fallback-code">affiliate1 / affiliate123</span>
            </div>
            <div>
              ðŸ”‘ Operations: <span class="fallback-code">operations / ops123</span>
            </div>
          </div>
          <div class="fallback-footer">
            Built with Django + React | Ready for form building & affiliate tracking
          </div>
        </div>
      </div>
    </div>
    
    <!-- Try to load React bundle if it exists -->
    <script>
      const loadReactApp = async () => {
        try {
          // Try to load built React assets directly
          const cssPath = '{% static "assets/index.css" %}';
          const jsPath = '{% static "assets/index.js" %}';
          
          // Test if assets exist
          const cssResponse = await fetch(cssPath);
          const jsResponse = await fetch(jsPath);
          
          if (cssResponse.ok && jsResponse.ok) {
            // Load CSS
            const cssLink = document.createElement('link');
            cssLink.rel = 'stylesheet';
            cssLink.href = cssPath;
            document.head.appendChild(cssLink);
            
            // Load JS
            const jsScript = document.createElement('script');
            jsScript.type = 'module';
            jsScript.src = jsPath;
            document.head.appendChild(jsScript);
            
            console.log('React app loaded successfully');
          } else {
            console.log('React assets not found, using fallback');
          }
        } catch (e) {
          console.log('React bundle not found, using fallback HTML');
        }
      };
      
      // Load React app
      loadReactApp();
    </script>
  </body>
</html>
